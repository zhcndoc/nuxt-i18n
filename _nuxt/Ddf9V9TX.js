import{c as K,t as xt,u as Ft,d as Z,a as De,w as ge,b as M,o as F,m as N,V as It,e as G,f as W,F as ce,r as de,i as St,g as $e,h as Bt,j as Te,k as Lt,l as kt,n as U,p as Je,q as ue,s as Ae,v as D,x as V,y as d,P as se,z as Mt,A as wt,B as Y,C as ae,D as me,E as Dt,G as $t,H as Tt,I as Ze,J as et,K as Kt,L as Rt,M as X,N as xe,O as tt,Q as st,R as qt,S as nt,T as Pt,U as Fe,W as it,X as He,Y as at,Z as lt,_ as rt,$ as Ne,a0 as H,a1 as he,a2 as Ve,a3 as Ee,a4 as Ie,a5 as Ot,a6 as Ht,a7 as Nt,a8 as Ce,a9 as oe,aa as Vt,ab as jt,ac as zt,ad as Gt,ae as Wt,af as Ut,ag as Yt,ah as Qt,ai as Xt,aj as Jt,ak as je,al as Zt,am as es,an as ts,ao as ss,ap as ns}from"#entry";import{f as is}from"./CANvInnb.js";import{_ as as}from"./Dcd2erlE.js";function ls(s){return K(()=>xt(s)?!!Ft(s)?.closest("form"):!0)}function rs(){return{ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",SPACE_CODE:"Space"}}var us=Z({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(s){const e=s,{primitiveElement:t,currentElement:i}=De(),a=K(()=>e.checked??e.value);return ge(a,(n,r)=>{if(!i.value)return;const u=i.value,o=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(o,"value").set;if(l&&n!==r){const h=new Event("input",{bubbles:!0}),p=new Event("change",{bubbles:!0});l.call(u,n),u.dispatchEvent(h),u.dispatchEvent(p)}}),(n,r)=>(F(),M(It,N({ref_key:"primitiveElement",ref:t},{...e,...n.$attrs},{as:"input"}),null,16))}}),ze=us,os=Z({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(s){const e=s,t=K(()=>typeof e.value=="object"&&Array.isArray(e.value)&&e.value.length===0&&e.required),i=K(()=>typeof e.value=="string"||typeof e.value=="number"||typeof e.value=="boolean"||e.value===null||e.value===void 0?[{name:e.name,value:e.value}]:typeof e.value=="object"&&Array.isArray(e.value)?e.value.flatMap((a,n)=>typeof a=="object"?Object.entries(a).map(([r,u])=>({name:`${e.name}[${n}][${r}]`,value:u})):{name:`${e.name}[${n}]`,value:a}):e.value!==null&&typeof e.value=="object"&&!Array.isArray(e.value)?Object.entries(e.value).map(([a,n])=>({name:`${e.name}[${a}]`,value:n})):[]);return(a,n)=>(F(),G(ce,null,[W(" We render single input if it's required "),t.value?(F(),M(ze,N({key:a.name},{...e,...a.$attrs},{name:a.name,value:a.value}),null,16,["name","value"])):(F(!0),G(ce,{key:1},de(i.value,r=>(F(),M(ze,N({key:r.name},{ref_for:!0},{...e,...a.$attrs},{name:r.name,value:r.value}),null,16,["name","value"]))),128))],2112))}}),cs=os;function ds(s,e,t){return s===void 0?!1:Array.isArray(s)?s.some(i=>fe(i,e,t)):fe(s,e,t)}function fe(s,e,t){return s===void 0||e===void 0?!1:typeof s=="string"?s===e:typeof t=="function"?t(s,e):typeof t=="string"?s?.[t]===e?.[t]:St(s,e)}const[Ke,fs]=$e("ListboxRoot");var hs=Z({__name:"ListboxRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},orientation:{type:String,required:!1,default:"vertical"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1,default:"toggle"},highlightOnHover:{type:Boolean,required:!1},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(s,{expose:e,emit:t}){const i=s,a=t,{multiple:n,highlightOnHover:r,orientation:u,disabled:o,selectionBehavior:f,dir:l}=Bt(i),{getItems:h}=Te({isProvider:!0}),{handleTypeaheadSearch:p}=Lt(),{primitiveElement:A,currentElement:g}=De(),_=rs(),w=kt(l),j=ls(g),R=U(),q=U(!1),C=U(!0),v=Je(i,"modelValue",a,{defaultValue:i.defaultValue??(n.value?[]:void 0),passive:i.modelValue===void 0,deep:!0});function L(m){if(q.value=!0,i.multiple){const x=Array.isArray(v.value)?[...v.value]:[],I=x.findIndex(P=>fe(P,m,i.by));i.selectionBehavior==="toggle"?(I===-1?x.push(m):x.splice(I,1),v.value=x):(v.value=[m],R.value=m)}else i.selectionBehavior==="toggle"&&fe(v.value,m,i.by)?v.value=void 0:v.value=m;setTimeout(()=>{q.value=!1},1)}const E=U(null),b=U(null),S=U(!1),B=U(!1),c=Ae(),k=Ae(),$=Ae();function T(){return h().map(m=>m.ref).filter(m=>m.dataset.disabled!=="")}function O(m,x=!0){if(!m)return;E.value=m,C.value&&E.value.focus(),x&&E.value.scrollIntoView({block:"nearest"});const I=h().find(P=>P.ref===m);a("highlight",I)}function ne(m){if(S.value)$.trigger(m);else{const x=h().find(I=>fe(I.value,m,i.by));x&&(E.value=x.ref,O(x.ref))}}function vt(m){E.value&&E.value.isConnected&&(m.preventDefault(),m.stopPropagation(),B.value||E.value.click())}function yt(m){if(C.value){if(q.value=!0,S.value)k.trigger(m);else{const x=m.altKey||m.ctrlKey||m.metaKey;if(x&&m.key==="a"&&n.value){const I=h(),P=I.map(ie=>ie.value);v.value=[...P],m.preventDefault(),O(I[I.length-1].ref)}else if(!x){const I=p(m.key,h());I&&O(I)}}setTimeout(()=>{q.value=!1},1)}}function bt(){B.value=!0}function At(){ue(()=>{B.value=!1})}function qe(){ue(()=>{const m=new KeyboardEvent("keydown",{key:"PageUp"});Pe(m)})}function be(m){const x=E.value;x?.isConnected&&(b.value=x),E.value=null,a("leave",m)}function Et(m){const x=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if(m.currentTarget?.dispatchEvent(x),a("entryFocus",x),!x.defaultPrevented)if(b.value)O(b.value);else{const I=T()?.[0];O(I)}}function Pe(m){const x=Mt(m,u.value,w.value);if(!x)return;let I=T();if(E.value){if(x==="last")I.reverse();else if(x==="prev"||x==="next"){x==="prev"&&I.reverse();const P=I.indexOf(E.value);I=I.slice(P+1)}Ct(m,I[0])}if(I.length){const P=!E.value&&x==="prev"?I.length-1:0;O(I[P])}if(S.value)return k.trigger(m)}function Ct(m,x){if(!(S.value||i.selectionBehavior!=="replace"||!n.value||!Array.isArray(v.value)||(m.altKey||m.ctrlKey||m.metaKey)&&!m.shiftKey)&&m.shiftKey){const P=h().filter(re=>re.ref.dataset.disabled!=="");let ie=P.find(re=>re.ref===x)?.value;if(m.key===_.END?ie=P[P.length-1].value:m.key===_.HOME&&(ie=P[0].value),!ie||!R.value)return;const _t=is(P.map(re=>re.value),R.value,ie);v.value=_t}}async function Oe(m){if(await ue(),S.value)c.trigger(m);else{const x=T(),I=x.find(P=>P.dataset.state==="checked");I?O(I):x.length&&O(x[0])}}return ge(v,()=>{q.value||ue(()=>{Oe()})},{immediate:!0,deep:!0}),e({highlightedElement:E,highlightItem:ne,highlightFirstItem:qe,highlightSelected:Oe,getItems:h}),fs({modelValue:v,onValueChange:L,multiple:n,orientation:u,dir:w,disabled:o,highlightOnHover:r,highlightedElement:E,isVirtual:S,virtualFocusHook:c,virtualKeydownHook:k,virtualHighlightHook:$,by:i.by,firstValue:R,selectionBehavior:f,focusable:C,onLeave:be,onEnter:Et,changeHighlight:O,onKeydownEnter:vt,onKeydownNavigation:Pe,onKeydownTypeAhead:yt,onCompositionStart:bt,onCompositionEnd:At,highlightFirstItem:qe}),(m,x)=>(F(),M(d(se),{ref_key:"primitiveElement",ref:A,as:m.as,"as-child":m.asChild,dir:d(w),"data-disabled":d(o)?"":void 0,onPointerleave:be,onFocusout:x[0]||(x[0]=async I=>{const P=I.relatedTarget||I.target;await ue(),E.value&&d(g)&&!d(g).contains(P)&&be(I)})},{default:D(()=>[V(m.$slots,"default",{modelValue:d(v)}),d(j)&&m.name?(F(),M(d(cs),{key:0,name:m.name,value:d(v),disabled:d(o),required:m.required},null,8,["name","value","disabled","required"])):W("v-if",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),ps=hs,gs=Z({__name:"ListboxContent",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s){const{CollectionSlot:e}=Te(),t=Ke(),i=wt(!1,10);return(a,n)=>(F(),M(d(e),null,{default:D(()=>[Y(d(se),{role:"listbox",as:a.as,"as-child":a.asChild,tabindex:d(t).focusable.value?d(t).highlightedElement.value?"-1":"0":void 0,"aria-orientation":d(t).orientation.value,"aria-multiselectable":!!d(t).multiple.value,"data-orientation":d(t).orientation.value,onMousedown:n[0]||(n[0]=me(r=>i.value=!0,["left"])),onFocus:n[1]||(n[1]=r=>{d(i)||d(t).onEnter(r)}),onKeydown:[n[2]||(n[2]=ae(me(r=>{d(t).focusable.value&&d(t).onKeydownNavigation(r)},["prevent"]),["down","up","left","right","home","end"])),ae(d(t).onKeydownEnter,["enter"]),d(t).onKeydownTypeAhead]},{default:D(()=>[V(a.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),ms=gs,vs=Z({__name:"ListboxFilter",props:{modelValue:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,a=Je(t,"modelValue",e,{defaultValue:"",passive:t.modelValue===void 0}),n=Ke(),{primitiveElement:r,currentElement:u}=De(),o=K(()=>t.disabled||n.disabled.value||!1),f=U();return Dt(()=>f.value=n.highlightedElement.value?.id),$t(()=>{n.focusable.value=!1,setTimeout(()=>{t.autoFocus&&u.value?.focus()},1)}),Tt(()=>{n.focusable.value=!0}),(l,h)=>(F(),M(d(se),{ref_key:"primitiveElement",ref:r,as:l.as,"as-child":l.asChild,value:d(a),disabled:o.value?"":void 0,"data-disabled":o.value?"":void 0,"aria-disabled":o.value??void 0,"aria-activedescendant":f.value,type:"text",onKeydown:[ae(me(d(n).onKeydownNavigation,["prevent"]),["down","up","home","end"]),ae(d(n).onKeydownEnter,["enter"])],onInput:h[0]||(h[0]=p=>{a.value=p.target.value,d(n).highlightFirstItem()}),onCompositionstart:d(n).onCompositionStart,onCompositionend:d(n).onCompositionEnd},{default:D(()=>[V(l.$slots,"default",{modelValue:d(a)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),ys=vs;const[bs,As]=$e("ListboxGroup");var Es=Z({__name:"ListboxGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s){const e=s,t=Ze(void 0,"reka-listbox-group");return As({id:t}),(i,a)=>(F(),M(d(se),N({role:"group"},e,{"aria-labelledby":d(t)}),{default:D(()=>[V(i.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),Cs=Es,_s=Z({__name:"ListboxGroupLabel",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(s){const e=s,t=bs({id:""});return(i,a)=>(F(),M(d(se),N(e,{id:d(t).id}),{default:D(()=>[V(i.$slots,"default")]),_:3},16,["id"]))}}),xs=_s;const Fs="listbox.select",[Is,Ss]=$e("ListboxItem");var Bs=Z({__name:"ListboxItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},emits:["select"],setup(s,{emit:e}){const t=s,i=e,a=Ze(void 0,"reka-listbox-item"),{CollectionItem:n}=Te(),{forwardRef:r,currentElement:u}=et(),o=Ke(),f=K(()=>u.value===o.highlightedElement.value),l=K(()=>ds(o.modelValue.value,t.value,o.by)),h=K(()=>o.disabled.value||t.disabled);async function p(g){i("select",g),!g?.defaultPrevented&&!h.value&&g&&(o.onValueChange(t.value),o.changeHighlight(u.value))}function A(g){const _={originalEvent:g,value:t.value};Rt(Fs,p,_)}return Ss({isSelected:l}),(g,_)=>(F(),M(d(n),{value:g.value},{default:D(()=>[Kt([f.value,l.value],()=>Y(d(se),N({id:d(a)},g.$attrs,{ref:d(r),role:"option",tabindex:d(o).focusable.value?f.value?"0":"-1":-1,"aria-selected":l.value,as:g.as,"as-child":g.asChild,disabled:h.value?"":void 0,"data-disabled":h.value?"":void 0,"data-highlighted":f.value?"":void 0,"data-state":l.value?"checked":"unchecked",onClick:A,onKeydown:ae(me(A,["prevent"]),["space"]),onPointermove:_[0]||(_[0]=w=>{d(o).highlightedElement.value!==d(u)&&(d(o).highlightOnHover.value?d(o).changeHighlight(d(u),!1):d(o).focusable.value||d(o).changeHighlight(d(u),!1))})}),{default:D(()=>[V(g.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),_,1)]),_:3},8,["value"]))}}),Ls=Bs,ks=Z({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(s){const e=s;et();const t=Is();return(i,a)=>d(t).isSelected.value?(F(),M(d(se),N({key:0,"aria-hidden":"true"},e),{default:D(()=>[V(i.$slots,"default")]),_:3},16)):W("v-if",!0)}}),Ms=ks;function J(s){return Array.isArray?Array.isArray(s):ct(s)==="[object Array]"}function ws(s){if(typeof s=="string")return s;let e=s+"";return e=="0"&&1/s==-1/0?"-0":e}function Ds(s){return s==null?"":ws(s)}function Q(s){return typeof s=="string"}function ut(s){return typeof s=="number"}function $s(s){return s===!0||s===!1||Ts(s)&&ct(s)=="[object Boolean]"}function ot(s){return typeof s=="object"}function Ts(s){return ot(s)&&s!==null}function z(s){return s!=null}function _e(s){return!s.trim().length}function ct(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(s)}const Ks="Incorrect 'index' type",Rs=s=>`Invalid value for key ${s}`,qs=s=>`Pattern length exceeds max of ${s}.`,Ps=s=>`Missing ${s} property in key`,Os=s=>`Property 'weight' in key '${s}' must be a positive integer`,Ge=Object.prototype.hasOwnProperty;class Hs{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(i=>{let a=dt(i);this._keys.push(a),this._keyMap[a.id]=a,t+=a.weight}),this._keys.forEach(i=>{i.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function dt(s){let e=null,t=null,i=null,a=1,n=null;if(Q(s)||J(s))i=s,e=We(s),t=Se(s);else{if(!Ge.call(s,"name"))throw new Error(Ps("name"));const r=s.name;if(i=r,Ge.call(s,"weight")&&(a=s.weight,a<=0))throw new Error(Os(r));e=We(r),t=Se(r),n=s.getFn}return{path:e,id:t,weight:a,src:i,getFn:n}}function We(s){return J(s)?s:s.split(".")}function Se(s){return J(s)?s.join("."):s}function Ns(s,e){let t=[],i=!1;const a=(n,r,u)=>{if(z(n))if(!r[u])t.push(n);else{let o=r[u];const f=n[o];if(!z(f))return;if(u===r.length-1&&(Q(f)||ut(f)||$s(f)))t.push(Ds(f));else if(J(f)){i=!0;for(let l=0,h=f.length;l<h;l+=1)a(f[l],r,u+1)}else r.length&&a(f,r,u+1)}};return a(s,Q(e)?e.split("."):e,0),i?t:t[0]}const Vs={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},js={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(s,e)=>s.score===e.score?s.idx<e.idx?-1:1:s.score<e.score?-1:1},zs={location:0,threshold:.6,distance:100},Gs={useExtendedSearch:!1,getFn:Ns,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var y={...js,...Vs,...zs,...Gs};const Ws=/[^ ]+/g;function Us(s=1,e=3){const t=new Map,i=Math.pow(10,e);return{get(a){const n=a.match(Ws).length;if(t.has(n))return t.get(n);const r=1/Math.pow(n,.5*s),u=parseFloat(Math.round(r*i)/i);return t.set(n,u),u},clear(){t.clear()}}}class Re{constructor({getFn:e=y.getFn,fieldNormWeight:t=y.fieldNormWeight}={}){this.norm=Us(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,i)=>{this._keysMap[t.id]=i})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Q(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();Q(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,i=this.size();t<i;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!z(e)||_e(e))return;let i={v:e,i:t,n:this.norm.get(e)};this.records.push(i)}_addObject(e,t){let i={i:t,$:{}};this.keys.forEach((a,n)=>{let r=a.getFn?a.getFn(e):this.getFn(e,a.path);if(z(r)){if(J(r)){let u=[];const o=[{nestedArrIndex:-1,value:r}];for(;o.length;){const{nestedArrIndex:f,value:l}=o.pop();if(z(l))if(Q(l)&&!_e(l)){let h={v:l,i:f,n:this.norm.get(l)};u.push(h)}else J(l)&&l.forEach((h,p)=>{o.push({nestedArrIndex:p,value:h})})}i.$[n]=u}else if(Q(r)&&!_e(r)){let u={v:r,n:this.norm.get(r)};i.$[n]=u}}}),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function ft(s,e,{getFn:t=y.getFn,fieldNormWeight:i=y.fieldNormWeight}={}){const a=new Re({getFn:t,fieldNormWeight:i});return a.setKeys(s.map(dt)),a.setSources(e),a.create(),a}function Ys(s,{getFn:e=y.getFn,fieldNormWeight:t=y.fieldNormWeight}={}){const{keys:i,records:a}=s,n=new Re({getFn:e,fieldNormWeight:t});return n.setKeys(i),n.setIndexRecords(a),n}function pe(s,{errors:e=0,currentLocation:t=0,expectedLocation:i=0,distance:a=y.distance,ignoreLocation:n=y.ignoreLocation}={}){const r=e/s.length;if(n)return r;const u=Math.abs(i-t);return a?r+u/a:u?1:r}function Qs(s=[],e=y.minMatchCharLength){let t=[],i=-1,a=-1,n=0;for(let r=s.length;n<r;n+=1){let u=s[n];u&&i===-1?i=n:!u&&i!==-1&&(a=n-1,a-i+1>=e&&t.push([i,a]),i=-1)}return s[n-1]&&n-i>=e&&t.push([i,n-1]),t}const te=32;function Xs(s,e,t,{location:i=y.location,distance:a=y.distance,threshold:n=y.threshold,findAllMatches:r=y.findAllMatches,minMatchCharLength:u=y.minMatchCharLength,includeMatches:o=y.includeMatches,ignoreLocation:f=y.ignoreLocation}={}){if(e.length>te)throw new Error(qs(te));const l=e.length,h=s.length,p=Math.max(0,Math.min(i,h));let A=n,g=p;const _=u>1||o,w=_?Array(h):[];let j;for(;(j=s.indexOf(e,g))>-1;){let E=pe(e,{currentLocation:j,expectedLocation:p,distance:a,ignoreLocation:f});if(A=Math.min(E,A),g=j+l,_){let b=0;for(;b<l;)w[j+b]=1,b+=1}}g=-1;let R=[],q=1,C=l+h;const v=1<<l-1;for(let E=0;E<l;E+=1){let b=0,S=C;for(;b<S;)pe(e,{errors:E,currentLocation:p+S,expectedLocation:p,distance:a,ignoreLocation:f})<=A?b=S:C=S,S=Math.floor((C-b)/2+b);C=S;let B=Math.max(1,p-S+1),c=r?h:Math.min(p+S,h)+l,k=Array(c+2);k[c+1]=(1<<E)-1;for(let T=c;T>=B;T-=1){let O=T-1,ne=t[s.charAt(O)];if(_&&(w[O]=+!!ne),k[T]=(k[T+1]<<1|1)&ne,E&&(k[T]|=(R[T+1]|R[T])<<1|1|R[T+1]),k[T]&v&&(q=pe(e,{errors:E,currentLocation:O,expectedLocation:p,distance:a,ignoreLocation:f}),q<=A)){if(A=q,g=O,g<=p)break;B=Math.max(1,2*p-g)}}if(pe(e,{errors:E+1,currentLocation:p,expectedLocation:p,distance:a,ignoreLocation:f})>A)break;R=k}const L={isMatch:g>=0,score:Math.max(.001,q)};if(_){const E=Qs(w,u);E.length?o&&(L.indices=E):L.isMatch=!1}return L}function Js(s){let e={};for(let t=0,i=s.length;t<i;t+=1){const a=s.charAt(t);e[a]=(e[a]||0)|1<<i-t-1}return e}const ve=String.prototype.normalize?(s=>s.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(s=>s);class ht{constructor(e,{location:t=y.location,threshold:i=y.threshold,distance:a=y.distance,includeMatches:n=y.includeMatches,findAllMatches:r=y.findAllMatches,minMatchCharLength:u=y.minMatchCharLength,isCaseSensitive:o=y.isCaseSensitive,ignoreDiacritics:f=y.ignoreDiacritics,ignoreLocation:l=y.ignoreLocation}={}){if(this.options={location:t,threshold:i,distance:a,includeMatches:n,findAllMatches:r,minMatchCharLength:u,isCaseSensitive:o,ignoreDiacritics:f,ignoreLocation:l},e=o?e:e.toLowerCase(),e=f?ve(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const h=(A,g)=>{this.chunks.push({pattern:A,alphabet:Js(A),startIndex:g})},p=this.pattern.length;if(p>te){let A=0;const g=p%te,_=p-g;for(;A<_;)h(this.pattern.substr(A,te),A),A+=te;if(g){const w=p-te;h(this.pattern.substr(w),w)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,ignoreDiacritics:i,includeMatches:a}=this.options;if(e=t?e:e.toLowerCase(),e=i?ve(e):e,this.pattern===e){let _={isMatch:!0,score:0};return a&&(_.indices=[[0,e.length-1]]),_}const{location:n,distance:r,threshold:u,findAllMatches:o,minMatchCharLength:f,ignoreLocation:l}=this.options;let h=[],p=0,A=!1;this.chunks.forEach(({pattern:_,alphabet:w,startIndex:j})=>{const{isMatch:R,score:q,indices:C}=Xs(e,_,w,{location:n+j,distance:r,threshold:u,findAllMatches:o,minMatchCharLength:f,includeMatches:a,ignoreLocation:l});R&&(A=!0),p+=q,R&&C&&(h=[...h,...C])});let g={isMatch:A,score:A?p/this.chunks.length:1};return A&&a&&(g.indices=h),g}}class ee{constructor(e){this.pattern=e}static isMultiMatch(e){return Ue(e,this.multiRegex)}static isSingleMatch(e){return Ue(e,this.singleRegex)}search(){}}function Ue(s,e){const t=s.match(e);return t?t[1]:null}class Zs extends ee{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class en extends ee{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const i=e.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,e.length-1]}}}class tn extends ee{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class sn extends ee{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class nn extends ee{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class an extends ee{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class pt extends ee{constructor(e,{location:t=y.location,threshold:i=y.threshold,distance:a=y.distance,includeMatches:n=y.includeMatches,findAllMatches:r=y.findAllMatches,minMatchCharLength:u=y.minMatchCharLength,isCaseSensitive:o=y.isCaseSensitive,ignoreDiacritics:f=y.ignoreDiacritics,ignoreLocation:l=y.ignoreLocation}={}){super(e),this._bitapSearch=new ht(e,{location:t,threshold:i,distance:a,includeMatches:n,findAllMatches:r,minMatchCharLength:u,isCaseSensitive:o,ignoreDiacritics:f,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class gt extends ee{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,i;const a=[],n=this.pattern.length;for(;(i=e.indexOf(this.pattern,t))>-1;)t=i+n,a.push([i,t-1]);const r=!!a.length;return{isMatch:r,score:r?0:1,indices:a}}}const Be=[Zs,gt,tn,sn,an,nn,en,pt],Ye=Be.length,ln=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,rn="|";function un(s,e={}){return s.split(rn).map(t=>{let i=t.trim().split(ln).filter(n=>n&&!!n.trim()),a=[];for(let n=0,r=i.length;n<r;n+=1){const u=i[n];let o=!1,f=-1;for(;!o&&++f<Ye;){const l=Be[f];let h=l.isMultiMatch(u);h&&(a.push(new l(h,e)),o=!0)}if(!o)for(f=-1;++f<Ye;){const l=Be[f];let h=l.isSingleMatch(u);if(h){a.push(new l(h,e));break}}}return a})}const on=new Set([pt.type,gt.type]);class cn{constructor(e,{isCaseSensitive:t=y.isCaseSensitive,ignoreDiacritics:i=y.ignoreDiacritics,includeMatches:a=y.includeMatches,minMatchCharLength:n=y.minMatchCharLength,ignoreLocation:r=y.ignoreLocation,findAllMatches:u=y.findAllMatches,location:o=y.location,threshold:f=y.threshold,distance:l=y.distance}={}){this.query=null,this.options={isCaseSensitive:t,ignoreDiacritics:i,includeMatches:a,minMatchCharLength:n,findAllMatches:u,ignoreLocation:r,location:o,threshold:f,distance:l},e=t?e:e.toLowerCase(),e=i?ve(e):e,this.pattern=e,this.query=un(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:i,isCaseSensitive:a,ignoreDiacritics:n}=this.options;e=a?e:e.toLowerCase(),e=n?ve(e):e;let r=0,u=[],o=0;for(let f=0,l=t.length;f<l;f+=1){const h=t[f];u.length=0,r=0;for(let p=0,A=h.length;p<A;p+=1){const g=h[p],{isMatch:_,indices:w,score:j}=g.search(e);if(_){if(r+=1,o+=j,i){const R=g.constructor.type;on.has(R)?u=[...u,...w]:u.push(w)}}else{o=0,r=0,u.length=0;break}}if(r){let p={isMatch:!0,score:o/r};return i&&(p.indices=u),p}}return{isMatch:!1,score:1}}}const Le=[];function dn(...s){Le.push(...s)}function ke(s,e){for(let t=0,i=Le.length;t<i;t+=1){let a=Le[t];if(a.condition(s,e))return new a(s,e)}return new ht(s,e)}const ye={AND:"$and",OR:"$or"},Me={PATH:"$path",PATTERN:"$val"},we=s=>!!(s[ye.AND]||s[ye.OR]),fn=s=>!!s[Me.PATH],hn=s=>!J(s)&&ot(s)&&!we(s),Qe=s=>({[ye.AND]:Object.keys(s).map(e=>({[e]:s[e]}))});function mt(s,e,{auto:t=!0}={}){const i=a=>{let n=Object.keys(a);const r=fn(a);if(!r&&n.length>1&&!we(a))return i(Qe(a));if(hn(a)){const o=r?a[Me.PATH]:n[0],f=r?a[Me.PATTERN]:a[o];if(!Q(f))throw new Error(Rs(o));const l={keyId:Se(o),pattern:f};return t&&(l.searcher=ke(f,e)),l}let u={children:[],operator:n[0]};return n.forEach(o=>{const f=a[o];J(f)&&f.forEach(l=>{u.children.push(i(l))})}),u};return we(s)||(s=Qe(s)),i(s)}function pn(s,{ignoreFieldNorm:e=y.ignoreFieldNorm}){s.forEach(t=>{let i=1;t.matches.forEach(({key:a,norm:n,score:r})=>{const u=a?a.weight:null;i*=Math.pow(r===0&&u?Number.EPSILON:r,(u||1)*(e?1:n))}),t.score=i})}function gn(s,e){const t=s.matches;e.matches=[],z(t)&&t.forEach(i=>{if(!z(i.indices)||!i.indices.length)return;const{indices:a,value:n}=i;let r={indices:a,value:n};i.key&&(r.key=i.key.src),i.idx>-1&&(r.refIndex=i.idx),e.matches.push(r)})}function mn(s,e){e.score=s.score}function vn(s,e,{includeMatches:t=y.includeMatches,includeScore:i=y.includeScore}={}){const a=[];return t&&a.push(gn),i&&a.push(mn),s.map(n=>{const{idx:r}=n,u={item:e[r],refIndex:r};return a.length&&a.forEach(o=>{o(n,u)}),u})}class le{constructor(e,t={},i){this.options={...y,...t},this.options.useExtendedSearch,this._keyStore=new Hs(this.options.keys),this.setCollection(e,i)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof Re))throw new Error(Ks);this._myIndex=t||ft(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){z(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let i=0,a=this._docs.length;i<a;i+=1){const n=this._docs[i];e(n,i)&&(this.removeAt(i),i-=1,a-=1,t.push(n))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:i,includeScore:a,shouldSort:n,sortFn:r,ignoreFieldNorm:u}=this.options;let o=Q(e)?Q(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return pn(o,{ignoreFieldNorm:u}),n&&o.sort(r),ut(t)&&t>-1&&(o=o.slice(0,t)),vn(o,this._docs,{includeMatches:i,includeScore:a})}_searchStringList(e){const t=ke(e,this.options),{records:i}=this._myIndex,a=[];return i.forEach(({v:n,i:r,n:u})=>{if(!z(n))return;const{isMatch:o,score:f,indices:l}=t.searchIn(n);o&&a.push({item:n,idx:r,matches:[{score:f,value:n,norm:u,indices:l}]})}),a}_searchLogical(e){const t=mt(e,this.options),i=(u,o,f)=>{if(!u.children){const{keyId:h,searcher:p}=u,A=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(o,h),searcher:p});return A&&A.length?[{idx:f,item:o,matches:A}]:[]}const l=[];for(let h=0,p=u.children.length;h<p;h+=1){const A=u.children[h],g=i(A,o,f);if(g.length)l.push(...g);else if(u.operator===ye.AND)return[]}return l},a=this._myIndex.records,n={},r=[];return a.forEach(({$:u,i:o})=>{if(z(u)){let f=i(t,u,o);f.length&&(n[o]||(n[o]={idx:o,item:u,matches:[]},r.push(n[o])),f.forEach(({matches:l})=>{n[o].matches.push(...l)}))}}),r}_searchObjectList(e){const t=ke(e,this.options),{keys:i,records:a}=this._myIndex,n=[];return a.forEach(({$:r,i:u})=>{if(!z(r))return;let o=[];i.forEach((f,l)=>{o.push(...this._findMatches({key:f,value:r[l],searcher:t}))}),o.length&&n.push({idx:u,item:r,matches:o})}),n}_findMatches({key:e,value:t,searcher:i}){if(!z(t))return[];let a=[];if(J(t))t.forEach(({v:n,i:r,n:u})=>{if(!z(n))return;const{isMatch:o,score:f,indices:l}=i.searchIn(n);o&&a.push({score:f,key:e,value:n,idx:r,norm:u,indices:l})});else{const{v:n,n:r}=t,{isMatch:u,score:o,indices:f}=i.searchIn(n);u&&a.push({score:o,key:e,value:n,norm:r,indices:f})}return a}}le.version="7.1.0";le.createIndex=ft;le.parseIndex=Ys;le.config=y;le.parseQuery=mt;dn(cn);function yn(s,e,t){const i=()=>{var r,u;return new le((r=X(e))!=null?r:[],(u=X(t))==null?void 0:u.fuseOptions)},a=U(i());ge(()=>{var r;return(r=X(t))==null?void 0:r.fuseOptions},()=>{a.value=i()},{deep:!0}),ge(()=>X(e),r=>{a.value.setCollection(r)},{deep:!0});const n=K(()=>{const r=X(t);if(r?.matchAllWhenSearchEmpty&&!X(s))return X(e).map((o,f)=>({item:o,refIndex:f}));const u=r?.resultLimit;return a.value.search(X(s),u?{limit:u}:void 0)});return{fuse:a,results:n}}function bn(s,e){let t="",i=0,a=!1;for(let n=s.length-1;n>=0;n--){if(s[n]===">")a=!0;else if(s[n]==="<"){a=!1,t=s[n]+t;continue}if(a||i++,i<=e)t=s[n]+t;else{t="..."+t;break}}return t}function Xe(s,e,t,i){function a(n,r=[]){n=n||"";let u="",o=0;r.forEach(l=>{if(l.length===2&&l[0]===l[1])return;const h=l[1]+1,p=h-l[0]>=e.length;u+=[n.substring(o,l[0]),p&&"<mark>",n.substring(l[0],h),p&&"</mark>"].filter(Boolean).join(""),o=h}),u+=n.substring(o);const f=u.indexOf("<mark>");return f!==-1&&(u=bn(u,u.length-f)),u}if(s.matches?.length){for(const n of s.matches)if(!(t&&n.key!==t)&&!i?.includes(n.key))return a(n.value,n.indices)}}const An={slots:{root:"flex flex-col min-h-0 min-w-0 divide-y divide-default",input:"[&>input]:h-12",close:"",back:"p-0",content:"relative overflow-hidden flex flex-col",footer:"p-1",viewport:"relative divide-y divide-default scroll-py-1 overflow-y-auto flex-1 focus:outline-none",group:"p-1 isolate",empty:"py-6 text-center text-sm text-muted",label:"p-1.5 text-xs font-semibold text-highlighted",item:"group relative w-full flex items-center gap-1.5 p-1.5 text-sm select-none outline-none before:absolute before:z-[-1] before:inset-px before:rounded-md data-disabled:cursor-not-allowed data-disabled:opacity-75",itemLeadingIcon:"shrink-0 size-5",itemLeadingAvatar:"shrink-0",itemLeadingAvatarSize:"2xs",itemLeadingChip:"shrink-0 size-5",itemLeadingChipSize:"md",itemTrailing:"ms-auto inline-flex gap-1.5 items-center",itemTrailingIcon:"shrink-0 size-5",itemTrailingHighlightedIcon:"shrink-0 size-5 text-dimmed hidden group-data-highlighted:inline-flex",itemTrailingKbds:"hidden lg:inline-flex items-center shrink-0 gap-0.5",itemTrailingKbdsSize:"md",itemLabel:"truncate space-x-1 text-dimmed",itemLabelBase:"text-highlighted [&>mark]:text-inverted [&>mark]:bg-primary",itemLabelPrefix:"text-default",itemLabelSuffix:"text-dimmed [&>mark]:text-inverted [&>mark]:bg-primary"},variants:{active:{true:{item:"text-highlighted before:bg-elevated",itemLeadingIcon:"text-default"},false:{item:["text-default data-highlighted:not-data-disabled:text-highlighted data-highlighted:not-data-disabled:before:bg-elevated/50","transition-colors before:transition-colors"],itemLeadingIcon:["text-dimmed group-data-highlighted:not-group-data-disabled:text-default","transition-colors"]}},loading:{true:{itemLeadingIcon:"animate-spin"}}}},En=["innerHTML"],Cn=["innerHTML"],_n={__name:"UCommandPalette",props:xe({as:{type:null,required:!1},icon:{type:String,required:!1},selectedIcon:{type:String,required:!1},trailingIcon:{type:String,required:!1},placeholder:{type:String,required:!1},autofocus:{type:Boolean,required:!1,default:!0},close:{type:[Boolean,Object],required:!1},closeIcon:{type:String,required:!1},back:{type:[Boolean,Object],required:!1,default:!0},backIcon:{type:String,required:!1},groups:{type:Array,required:!1},fuse:{type:Object,required:!1},labelKey:{type:String,required:!1,default:"label"},class:{type:null,required:!1},ui:{type:null,required:!1},multiple:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},modelValue:{type:null,required:!1,default:""},defaultValue:{type:null,required:!1},highlightOnHover:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:String,required:!1}},{searchTerm:{type:String,default:""},searchTermModifiers:{}}),emits:xe(["update:modelValue","highlight","entryFocus","leave","update:open"],["update:searchTerm"]),setup(s,{emit:e}){const t=s,i=e,a=tt(),n=st(s,"searchTerm",{type:String,default:""}),{t:r}=qt(),u=nt(),o=Pt(Fe(t,"as","disabled","multiple","modelValue","defaultValue","highlightOnHover","selectionBehavior"),i),f=it(Fe(t,"loading","loadingIcon")),l=K(()=>He({extend:He(An),...u.ui?.commandPalette||{}})()),h=K(()=>at({},t.fuse,{fuseOptions:{ignoreLocation:!0,threshold:.1,keys:[t.labelKey,"suffix"]},resultLimit:12,matchAllWhenSearchEmpty:!0})),p=U([]),A=K(()=>p.value[p.value.length-1]?.placeholder||t.placeholder||r("commandPalette.placeholder")),g=K(()=>p.value?.length?[p.value[p.value.length-1]]:t.groups),_=K(()=>g.value?.filter(b=>b.id?!b.ignoreFilter:(console.warn("[@nuxt/ui] CommandPalette group is missing an `id` property"),!1))?.flatMap(b=>b.items?.map(S=>({...S,group:b.id}))||[])||[]),{results:w}=yn(n,_,h);function j(b,S){return b?.postFilter&&typeof b.postFilter=="function"&&(S=b.postFilter(n.value,S)),{...b,items:S.slice(0,h.value.resultLimit).map(B=>({...B,labelHtml:Xe(B,n.value,t.labelKey),suffixHtml:Xe(B,n.value,void 0,[t.labelKey])}))}}const R=K(()=>{const b=w.value.reduce((c,k)=>{const{item:$,matches:T}=k;return $.group&&(c[$.group]||=[],c[$.group]?.push({...$,matches:T})),c},{}),S=Object.entries(b).map(([c,k])=>{const $=g.value?.find(T=>T.id===c);if($)return j($,k)}).filter(c=>!!c);return(g.value?.map((c,k)=>({...c,index:k}))?.filter(c=>c.ignoreFilter&&c.items?.length)?.map(c=>({...j(c,c.items||[]),index:c.index}))||[]).reduce((c,k)=>(c.splice(k.index,0,k),c),[...S])}),q=lt("listboxRootRef");function C(b){b.children?.length&&(p.value.push({id:`history-${p.value.length}`,label:b.label,slot:b.slot,placeholder:b.placeholder,items:b.children}),n.value="",q.value?.highlightFirstItem())}function v(){p.value.length&&(p.value.pop(),n.value="",q.value?.highlightFirstItem())}function L(){n.value||v()}function E(b,S){S.children?.length?(b.preventDefault(),C(S)):S.onSelect?.(b)}return(b,S)=>(F(),M(d(ps),N(d(o),{ref_key:"listboxRootRef",ref:q,class:l.value.root({class:[t.ui?.root,t.class]})}),{default:D(()=>[Y(d(ys),{modelValue:n.value,"onUpdate:modelValue":S[1]||(S[1]=B=>n.value=B),"as-child":""},{default:D(()=>[Y(as,N({placeholder:A.value,variant:"none",autofocus:s.autofocus},d(f),{icon:s.icon||d(u).ui.icons.search,class:l.value.input({class:t.ui?.input}),onKeydown:ae(L,["backspace"])}),rt({_:2},[p.value?.length&&(s.back||a.back)?{name:"leading",fn:D(()=>[V(b.$slots,"back",{ui:l.value},()=>[Y(Ne,N({icon:s.backIcon||d(u).ui.icons.arrowLeft,color:"neutral",variant:"link","aria-label":d(r)("commandPalette.back")},typeof s.back=="object"?s.back:{},{class:l.value.back({class:t.ui?.back}),onClick:v}),null,16,["icon","aria-label","class"])])]),key:"0"}:void 0,s.close||a.close?{name:"trailing",fn:D(()=>[V(b.$slots,"close",{ui:l.value},()=>[s.close?(F(),M(Ne,N({key:0,icon:s.closeIcon||d(u).ui.icons.close,color:"neutral",variant:"ghost","aria-label":d(r)("commandPalette.close")},typeof s.close=="object"?s.close:{},{class:l.value.close({class:t.ui?.close}),onClick:S[0]||(S[0]=B=>i("update:open",!1))}),null,16,["icon","aria-label","class"])):W("",!0)])]),key:"1"}:void 0]),1040,["placeholder","autofocus","icon","class"])]),_:3},8,["modelValue"]),Y(d(ms),{class:H(l.value.content({class:t.ui?.content}))},{default:D(()=>[R.value?.length?(F(),G("div",{key:0,role:"presentation",class:H(l.value.viewport({class:t.ui?.viewport}))},[(F(!0),G(ce,null,de(R.value,B=>(F(),M(d(Cs),{key:`group-${B.id}`,class:H(l.value.group({class:t.ui?.group}))},{default:D(()=>[d(he)(B,t.labelKey)?(F(),M(d(xs),{key:0,class:H(l.value.label({class:t.ui?.label}))},{default:D(()=>[Ve(Ee(d(he)(B,t.labelKey)),1)]),_:2},1032,["class"])):W("",!0),(F(!0),G(ce,null,de(B.items,(c,k)=>(F(),M(d(Ls),{key:`group-${B.id}-${k}`,value:d(Ie)(c,["matches","group","onSelect","labelHtml","suffixHtml","children"]),disabled:c.disabled,"as-child":"",onSelect:$=>E($,c)},{default:D(()=>[Y(Ot,N({ref_for:!0},d(Ht)(c),{custom:""}),{default:D(({active:$,...T})=>[Y(Nt,N({ref_for:!0},T,{class:l.value.item({class:[t.ui?.item,c.ui?.item,c.class],active:$||c.active})}),{default:D(()=>[V(b.$slots,c.slot||B.slot||"item",{item:c,index:k},()=>[V(b.$slots,c.slot?`${c.slot}-leading`:B.slot?`${B.slot}-leading`:"item-leading",{item:c,index:k},()=>[c.loading?(F(),M(oe,{key:0,name:s.loadingIcon||d(u).ui.icons.loading,class:H(l.value.itemLeadingIcon({class:[t.ui?.itemLeadingIcon,c.ui?.itemLeadingIcon],loading:!0}))},null,8,["name","class"])):c.icon?(F(),M(oe,{key:1,name:c.icon,class:H(l.value.itemLeadingIcon({class:[t.ui?.itemLeadingIcon,c.ui?.itemLeadingIcon],active:$||c.active}))},null,8,["name","class"])):c.avatar?(F(),M(Vt,N({key:2,size:c.ui?.itemLeadingAvatarSize||t.ui?.itemLeadingAvatarSize||l.value.itemLeadingAvatarSize()},{ref_for:!0},c.avatar,{class:l.value.itemLeadingAvatar({class:[t.ui?.itemLeadingAvatar,c.ui?.itemLeadingAvatar],active:$||c.active})}),null,16,["size","class"])):c.chip?(F(),M(jt,N({key:3,size:c.ui?.itemLeadingChipSize||t.ui?.itemLeadingChipSize||l.value.itemLeadingChipSize(),inset:"",standalone:""},{ref_for:!0},c.chip,{class:l.value.itemLeadingChip({class:[t.ui?.itemLeadingChip,c.ui?.itemLeadingChip],active:$||c.active})}),null,16,["size","class"])):W("",!0)]),c.labelHtml||d(he)(c,t.labelKey)||a[c.slot?`${c.slot}-label`:B.slot?`${B.slot}-label`:"item-label"]?(F(),G("span",{key:0,class:H(l.value.itemLabel({class:[t.ui?.itemLabel,c.ui?.itemLabel],active:$||c.active}))},[V(b.$slots,c.slot?`${c.slot}-label`:B.slot?`${B.slot}-label`:"item-label",{item:c,index:k},()=>[c.prefix?(F(),G("span",{key:0,class:H(l.value.itemLabelPrefix({class:[t.ui?.itemLabelPrefix,c.ui?.itemLabelPrefix]}))},Ee(c.prefix),3)):W("",!0),Ce("span",{class:H(l.value.itemLabelBase({class:[t.ui?.itemLabelBase,c.ui?.itemLabelBase],active:$||c.active})),innerHTML:c.labelHtml||d(he)(c,t.labelKey)},null,10,En),Ce("span",{class:H(l.value.itemLabelSuffix({class:[t.ui?.itemLabelSuffix,c.ui?.itemLabelSuffix],active:$||c.active})),innerHTML:c.suffixHtml||c.suffix},null,10,Cn)])],2)):W("",!0),Ce("span",{class:H(l.value.itemTrailing({class:[t.ui?.itemTrailing,c.ui?.itemTrailing]}))},[V(b.$slots,c.slot?`${c.slot}-trailing`:B.slot?`${B.slot}-trailing`:"item-trailing",{item:c,index:k},()=>[c.children&&c.children.length>0?(F(),M(oe,{key:0,name:s.trailingIcon||d(u).ui.icons.chevronRight,class:H(l.value.itemTrailingIcon({class:[t.ui?.itemTrailingIcon,c.ui?.itemTrailingIcon]}))},null,8,["name","class"])):c.kbds?.length?(F(),G("span",{key:1,class:H(l.value.itemTrailingKbds({class:[t.ui?.itemTrailingKbds,c.ui?.itemTrailingKbds]}))},[(F(!0),G(ce,null,de(c.kbds,(O,ne)=>(F(),M(zt,N({key:ne,size:c.ui?.itemTrailingKbdsSize||t.ui?.itemTrailingKbdsSize||l.value.itemTrailingKbdsSize()},{ref_for:!0},typeof O=="string"?{value:O}:O),null,16,["size"]))),128))],2)):B.highlightedIcon?(F(),M(oe,{key:2,name:B.highlightedIcon,class:H(l.value.itemTrailingHighlightedIcon({class:[t.ui?.itemTrailingHighlightedIcon,c.ui?.itemTrailingHighlightedIcon]}))},null,8,["name","class"])):W("",!0)]),c.children?.length?W("",!0):(F(),M(d(Ms),{key:0,"as-child":""},{default:D(()=>[Y(oe,{name:s.selectedIcon||d(u).ui.icons.check,class:H(l.value.itemTrailingIcon({class:[t.ui?.itemTrailingIcon,c.ui?.itemTrailingIcon]}))},null,8,["name","class"])]),_:2},1024))],2)])]),_:2},1040,["class"])]),_:2},1040)]),_:2},1032,["value","disabled","onSelect"]))),128))]),_:2},1032,["class"]))),128))],2)):(F(),G("div",{key:1,class:H(l.value.empty({class:t.ui?.empty}))},[V(b.$slots,"empty",{searchTerm:n.value},()=>[Ve(Ee(n.value?d(r)("commandPalette.noMatch",{searchTerm:n.value}):d(r)("commandPalette.noData")),1)])],2))]),_:3},8,["class"]),a.footer?(F(),G("div",{key:0,class:H(l.value.footer({class:t.ui?.footer}))},[V(b.$slots,"footer",{ui:l.value})],2)):W("",!0)]),_:3},16,["class"]))}},xn={slots:{modal:"sm:max-w-3xl sm:h-[28rem]",input:"[&>input]:text-base/5"}},Fn=/^[^-]+.*-.*[^-]+$/,In=/^[^_]+.*_.*[^_]+$/,Sn=["arrowleft","arrowright","arrowup","arrowright","tab","escape","enter","backspace"];function Bn(s,e={}){const t=U([]),i=()=>{t.value.splice(0,t.value.length)},a=Gt(i,e.chainDelay??800),{macOS:n}=Wt(),r=Ut(),u=l=>{if(!l.key)return;const h=/^[a-z]{1}$/i.test(l.key),p=Sn.includes(l.key.toLowerCase());let A;if(t.value.push(l.key),t.value.length>=2){A=t.value.slice(-2).join("-");for(const g of f.value.filter(_=>_.chained))if(g.key===A){g.enabled&&(l.preventDefault(),g.handler(l)),i();return}}for(const g of f.value.filter(_=>!_.chained))if(l.key.toLowerCase()===g.key&&l.metaKey===g.metaKey&&l.ctrlKey===g.ctrlKey&&!((h||p)&&l.shiftKey!==g.shiftKey)){g.enabled&&(l.preventDefault(),g.handler(l)),i();return}a()},o=K(()=>{const l=r.value?.tagName,h=r.value?.contentEditable;return l==="INPUT"||l==="TEXTAREA"||h==="true"||h==="plaintext-only"?r.value?.name||!0:!1}),f=K(()=>Object.entries(X(s)).map(([l,h])=>{if(!h)return null;let p;l.includes("-")&&l!=="-"&&!l.includes("_")&&!l.match(Fn)?.length&&console.trace(`[Shortcut] Invalid key: "${l}"`),l.includes("_")&&l!=="_"&&!l.match(In)?.length&&console.trace(`[Shortcut] Invalid key: "${l}"`);const A=l.includes("-")&&l!=="-"&&!l.includes("_");if(A)p={key:l.toLowerCase(),metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1};else{const _=l.toLowerCase().split("_").map(w=>w);p={key:_.filter(w=>!["meta","command","ctrl","shift","alt","option"].includes(w)).join("_"),metaKey:_.includes("meta")||_.includes("command"),ctrlKey:_.includes("ctrl"),shiftKey:_.includes("shift"),altKey:_.includes("alt")||_.includes("option")}}if(p.chained=A,!n.value&&p.metaKey&&!p.ctrlKey&&(p.metaKey=!1,p.ctrlKey=!0),typeof h=="function"?p.handler=h:typeof h=="object"&&(p={...p,handler:h.handler}),!p.handler)return console.trace("[Shortcut] Invalid value"),null;let g=!0;return h.usingInput?typeof h.usingInput=="string"&&(g=o.value===h.usingInput):g=!o.value,p.enabled=g,p}).filter(Boolean));return Yt("keydown",u)}const wn={__name:"UContentSearch",props:xe({icon:{type:String,required:!1},placeholder:{type:null,required:!1},autofocus:{type:Boolean,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:String,required:!1},close:{type:[Boolean,Object],required:!1,default:!0},closeIcon:{type:String,required:!1},shortcut:{type:String,required:!1,default:"meta_k"},links:{type:Array,required:!1},navigation:{type:Array,required:!1},groups:{type:Array,required:!1},files:{type:Array,required:!1},fuse:{type:Object,required:!1},colorMode:{type:Boolean,required:!1,default:!0},class:{type:null,required:!1},ui:{type:void 0,required:!1}},{searchTerm:{type:String,default:""},searchTermModifiers:{}}),emits:["update:searchTerm"],setup(s,{expose:e}){const t=s,i=tt(),a=st(s,"searchTerm",{type:String,default:""}),{t:n}=Qt(),{open:r}=Xt(),u=Jt(),o=nt(),f=it(Fe(t,"icon","placeholder","autofocus","loading","loadingIcon","close","closeIcon")),l=Ie(i,["content"]),h=K(()=>at({},t.fuse,{fuseOptions:{includeMatches:!0}})),p=K(()=>je({extend:je(xn),...o.uiPro?.contentSearch||{}})());function A(C){return C.flatMap(v=>[{...v,suffix:v.description,icon:v.icon||o.ui.icons.file},...v.children?.map(L=>({...L,prefix:v.label+" >",suffix:L.description,icon:L.icon||v.icon||o.ui.icons.file}))||[]])}function g(C,v){return C.flatMap(L=>L.children?.length?g(L.children,L):t.files?.filter(E=>E.id===L.path||E.id.startsWith(`${L.path}#`))?.map(E=>_(E,L,v))||[])}function _(C,v,L){const E=[...new Set([L?.title,...C.titles].filter(Boolean))];return{prefix:E?.length?E.join(" > ")+" >":void 0,label:C.id===v.path?v.title:C.title,suffix:C.content.replaceAll("<","&lt;").replaceAll(">","&gt;"),to:C.id,icon:v.icon||L?.icon||(C.level>1?o.ui.icons.hash:o.ui.icons.file),level:C.level}}const w=K(()=>{const C=[];return t.links?.length&&C.push({id:"links",label:n("contentSearch.links"),items:A(t.links)}),t.navigation?.length&&(t.navigation.some(v=>!!v.children?.length)?C.push(...t.navigation.map(v=>({id:v.path,label:v.title,items:g(v.children||[]),postFilter:j}))):C.push({id:"docs",items:g(t.navigation),postFilter:j})),C.push(...t.groups||[]),t.colorMode&&!u?.forced&&C.push({id:"theme",label:n("contentSearch.theme"),items:[{label:n("colorMode.system"),icon:o.ui.icons.system,active:u.preference==="system",onSelect:()=>{u.preference="system"}},{label:n("colorMode.light"),icon:o.ui.icons.light,active:u.preference==="light",onSelect:()=>{u.preference="light"}},{label:n("colorMode.dark"),icon:o.ui.icons.dark,active:u.preference==="dark",onSelect:()=>{u.preference="dark"}}]}),C});function j(C,v){return C?v:v?.filter(L=>L.level===1)}function R(C){C.disabled||(r.value=!1,a.value="")}Bn({[t.shortcut]:{usingInput:!0,handler:()=>r.value=!r.value}});const q=lt("commandPaletteRef");return e({commandPaletteRef:q}),(C,v)=>(F(),M(ns,{open:d(r),"onUpdate:open":v[2]||(v[2]=L=>ss(r)?r.value=L:null),title:d(n)("contentSearch.title"),description:d(n)("contentSearch.description"),class:H(p.value.modal({class:[t.ui?.modal,t.class]}))},{content:D(()=>[V(C.$slots,"content",{},()=>[Y(_n,N({ref_key:"commandPaletteRef",ref:q,"search-term":a.value,"onUpdate:searchTerm":v[0]||(v[0]=L=>a.value=L)},d(f),{groups:w.value,fuse:h.value,ui:d(Zt)(d(Ie)(p.value,["modal"]),t.ui),"onUpdate:modelValue":R,"onUpdate:open":v[1]||(v[1]=L=>r.value=L)}),rt({_:2},[de(d(l),(L,E)=>({name:E,fn:D(b=>[V(C.$slots,E,es(ts(b)))])}))]),1040,["search-term","groups","fuse","ui"])])]),_:3},8,["open","title","description","class"]))}};export{wn as default};
